(this["webpackJsonpsignal-giphy"]=this["webpackJsonpsignal-giphy"]||[]).push([[0],{104:function(e,t,n){e.exports=n(148)},109:function(e,t,n){},148:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),c=n.n(i),o=(n(109),n(67)),u=n(14),s=n(48),l=n(13),f=n(43),d=n.n(f),m=n(65),p=n(59),h=new(n(37).GiphyFetch)("jVkcGqYFQr7OyZ8sfqe7ADju8KRef0RE");var g=Object(p.b)({name:"gifs",initialState:{searchQuery:"",focusedGifId:null,gifs:[],loadingGifsPage:!1,hasNextPage:!0,networkError:null},reducers:{updateSearchQuery:function(e,t){e.searchQuery=t.payload},focusGif:function(e,t){e.focusedGifId=t.payload},clearGifFocus:function(e){e.focusedGifId=null},requestGifs:function(e,t){e.loadingGifsPage=!0,e.hasNextPage=!0,t.payload.newSearch&&(e.gifs=[])},receiveGifs:function(e,t){e.gifs=function(e){var t={};return e.forEach((function(e){var n;t[e.id]=(null!==(n=t[e.id])&&void 0!==n?n:0)+1})),e.reverse().reduce((function(e,n){return t[n.id]=t[n.id]-1,t[n.id]>0||e.unshift(n),e}),[])}(e.gifs.concat(t.payload.gifs)),e.hasNextPage=e.gifs.length<=t.payload.totalCount,e.loadingGifsPage=!1},gifsRequestFailure:function(e,t){e.networkError=t.payload.error,e.loadingGifsPage=!1,e.hasNextPage=!1}}}),b=g.reducer,v=g.actions,j=v.focusGif,O=v.clearGifFocus,w=(v.requestGifs,v.receiveGifs,v.gifsRequestFailure,v.updateSearchQuery,function(e){return e.gifs.searchQuery}),y=function(e){return e.gifs.gifs},E=function(e){return e.gifs.loadingGifsPage},x=function(e){return e.gifs.hasNextPage},k=function(e){return e.gifs.gifs.find((function(t){return t.id===e.gifs.focusedGifId}))};function G(e){var t=e.newSearch;return function(){var e=Object(m.a)(d.a.mark((function e(n,a){var r,i,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n(g.actions.requestGifs({newSearch:t})),r=w(a()),i=y(a()).length,e.prev=3,!r){e.next=10;break}return e.next=7,h.search(r,{offset:i,limit:50});case 7:c=e.sent,e.next=13;break;case 10:return e.next=12,h.trending({offset:i,limit:50});case 12:c=e.sent;case 13:n(g.actions.receiveGifs({gifs:c.data,totalCount:c.pagination.total_count})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),n(g.actions.gifsRequestFailure({error:e.t0.message}));case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t,n){return e.apply(this,arguments)}}()}var S=null;function C(e){return function(t,n){t(g.actions.updateSearchQuery(e)),S&&clearTimeout(S),S=setTimeout(Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(G({newSearch:!0}));case 1:case"end":return e.stop()}}),e)}))),500)}}var I=n(16),P=n(177),N=n(178),F=n(188),M=n(180),R=n(88);var z=n(60),q=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current},W=n(89),Q=n.n(W);function B(e){var t=e.onVisible,n=e.onHidden,r=Object(z.a)(e,["onVisible","onHidden"]),i=a.useRef(null),c=a.useState(!1),o=Object(u.a)(c,2),s=o[0],l=o[1],f=q(s);return a.useEffect((function(){!!f!==s&&(s?null===t||void 0===t||t():null===n||void 0===n||n())}),[f,s,n,t]),a.useEffect((function(){if(i.current){var e=i.current,t=new Q.a((function(e){l(e[0].isIntersecting)}));return t.observe(e),function(){t.disconnect()}}}),[i]),a.createElement("div",Object.assign({ref:i},r))}var D=n(49);var H=Object(N.a)((function(){return{root:{width:"100%",position:"relative"},cell:{position:"absolute",left:0,opacity:0,top:32,animationName:"$fadeUp",animationDuration:"800ms",animationTimingFunction:"ease-out",animationFillMode:"forwards"},"@keyframes fadeUp":{from:{opacity:0,top:32},to:{opacity:1,top:0}}}}));function L(e){var t=e.gap,n=void 0===t?8:t,r=H(),i=Object(l.b)(),c=a.useCallback((function(){i(G({newSearch:!1}))}),[i]),f=a.useCallback((function(e,t){t.preventDefault(),i(j(e.id.toString()))}),[i]),d=Object(l.c)(y),m=Object(l.c)(E),p=Object(l.c)(x),h=function(){var e=Object(P.a)((function(e){return e.breakpoints.up("sm")}));return Object(P.a)((function(e){return e.breakpoints.up("md")}))?4:e?2:1}(),g=function(){var e=Object(a.useState)(0),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=Object(D.a)((function(){r(window.scrollY)}),300);return document.addEventListener("scroll",e),function(){document.removeEventListener("scroll",e)}}),[]),n}(),b=function(){var e=Object(a.useRef)(null),t=Object(a.useState)({left:0,top:0,width:0,height:0}),n=Object(u.a)(t,2),r=n[0],i=n[1],c=Object(a.useState)((function(){return new R.a((function(e){var t=Object(u.a)(e,1)[0];return i(t.contentRect)}))})),o=Object(u.a)(c,1)[0];return Object(a.useEffect)((function(){if(e.current)return o.observe(e.current),function(){return o.disconnect()}}),[o]),[{ref:e},r]}(),v=Object(u.a)(b,2),O=v[0],w=v[1].width,k=w/h-n*(h-1),S=new Array(h).fill(0),C=d.map((function(e){var t=S.indexOf(Math.min.apply(Math,Object(o.a)(S))),a=Object(I.getGifHeight)(e,k),r="translate3d(".concat((w/h+n)*t,"px, ").concat(S[t],"px, 0)");return S[t]=S[t]+a+n,{transform:r,visible:S[t]+a>=g-1600}}));return a.createElement(a.Fragment,null,a.createElement("div",Object.assign({},O,{className:r.root,style:{height:Math.max.apply(Math,Object(o.a)(S))}}),w&&d.map((function(e,t){var n=C[t],i=n.transform;return n.visible?a.createElement(s.Gif,{key:e.id,gif:e,width:k||100,className:r.cell,style:{transform:i},onGifClick:f}):null}))),p&&a.createElement(F.a,{height:"75vh",display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},a.createElement(B,{onVisible:c}),m&&a.createElement(M.a,null)))}var T=n(183),A=n(152),V=n(184),J=n(66),U=n(187),Y=n(190),$=n(192),K=n(3),Z=Object(N.a)((function(e){return{root:{backgroundColor:e.palette.background.paper,color:e.palette.text.primary}}}));function _(e){var t=Z(e),n=e.className,r=e.InputProps,i=Object(z.a)(e,["className","InputProps"]),c=Object(l.c)(w),o=Object(l.b)(),u=a.useCallback((function(e){o(C(e.target.value))}),[o]),s=a.useCallback((function(){o(C(""))}),[o]);return a.createElement(U.a,Object.assign({label:"Search!",value:c,onChange:u,variant:"outlined",className:Object(K.a)(t.root,n),InputProps:Object(J.a)(Object(J.a)({},r),{},{endAdornment:c&&a.createElement(Y.a,{onClick:s},a.createElement($.a,null))})},i))}var X=n(191);function ee(){var e=Object(a.useState)("undefined"===typeof window?{width:0,height:0}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){var e=Object(D.a)((function(){r({width:document.documentElement.clientWidth,height:document.documentElement.clientHeight})}),100);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n}function te(){var e=Object(l.c)(k),t=Object(l.b)(),n=a.useCallback((function(){t(O())}),[t]),r=ee().width;return a.createElement(X.a,{open:!!e,onClose:n,maxWidth:!1},!!e&&a.createElement(s.Gif,{gif:e,width:.75*r}))}var ne=Object(N.a)((function(e){return{root:{},search:{marginBottom:e.spacing(2),position:"sticky",top:e.spacing(2),zIndex:e.zIndex.modal}}}));var ae=function(){var e=ne();return r.a.createElement(F.a,{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"},r.a.createElement(T.a,{component:"header",maxWidth:"md",style:{marginBottom:16}},r.a.createElement(A.a,{variant:"h1"},"Gifs!"),r.a.createElement(V.a,{href:"https://github.com/a-type/signal-giphy#devlog"},"Read the devlog for more detail!")),r.a.createElement(T.a,{component:"section",maxWidth:"md"},r.a.createElement(_,{className:e.search,fullWidth:!0}),r.a.createElement(L,null),r.a.createElement(te,null)))},re=n(39),ie=Object(p.a)({reducer:{gifs:b},middleware:[re.a]});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ce,oe=n(185),ue=n(186),se=n(32),le=n(93),fe={type:"dark",text:{primary:"#fff"},primary:{main:"#eeeeee"},secondary:{main:"#a0a0af"},background:{default:"#222831",paper:"#111321"}},de=Object(le.a)({palette:fe}),me=de.palette,pe=de.breakpoints,he=(ce=me,Object(le.a)({palette:ce,shape:{},typography:{fontSize:16},overrides:{MuiAppBar:{colorDefault:{backgroundColor:"transparent"}},MuiTypography:{h1:Object(se.a)({},pe.down("sm"),{fontSize:"5vmax"}),h2:Object(se.a)({},pe.down("sm"),{fontSize:"4vmax"}),h3:Object(se.a)({},pe.down("sm"),{fontSize:"3.75vmax"}),h4:Object(se.a)({},pe.down("sm"),{fontSize:"3.3vmax"})}},props:{MuiTextField:{variant:"filled"},MuiButton:{color:"primary"},MuiLink:{underline:"always"}}}));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:ie},r.a.createElement(oe.a,{theme:he},r.a.createElement(ue.a,null),r.a.createElement(ae,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[104,1,2]]]);
//# sourceMappingURL=main.4038eee8.chunk.js.map